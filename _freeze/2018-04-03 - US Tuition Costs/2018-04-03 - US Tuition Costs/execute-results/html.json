{
  "hash": "ca2af89b2f12c93ce4290d7640ebd63b",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"2018-04-03 - US Tuition Costs\"\nauthor: \"Hippolyte Menou\"\nformat: html\neditor: visual\n---\n\n\n\n\n# Introduction\n\nThis analysis explores the evolution of university tuition costs across different states in the United States over a twelve-year period (2004-2016). We'll investigate patterns in tuition increases, state-by-state variations, and potential relationships between initial costs and growth rates.\n\n# Data Preparation\n\nWe begin by loading necessary libraries for data manipulation, visualization, and formatting. Our visual theme is minimalist, using a custom color palette and the Fira Sans font family. We've also set up currency formatting for clearer presentation of dollar amounts.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(glue)\nlibrary(scales)\nlibrary(ggtext)\nlibrary(ggdist)\nlibrary(readxl)\nlibrary(paletteer)\nlibrary(patchwork)\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\ntheme_set(theme_minimal())\n\ntheme_update(\n  legend.position = \"None\"\n)\n\nfont_family <- \"Fira Sans\"\n\npalette <- c(\"#D3F2A3FF\", \"#97E196FF\", \"#6CC08BFF\", \"#4C9B82FF\", \"#217A79FF\", \"#105965FF\", \"#074050FF\")\n\n\nlabel_dollars <- label_currency(accuracy = 1)\n```\n:::\n\n\n\n\nThe dataset contains average tuition costs by state from 2004-05 to 2015-16 academic years. We reshape the data into a longer format to facilitate various types of analysis.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_avg_tuition <- read_xlsx(\"us_avg_tuition.xlsx\")\n\nus_avg_tuition_longer <- us_avg_tuition %>% \n  pivot_longer(`2004-05`:`2015-16`, names_to = \"Season\", values_to = \"avg_tuition\") \n\nus_avg_tuition_longer %>% \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 600\nColumns: 3\n$ State       <chr> \"Alabama\", \"Alabama\", \"Alabama\", \"Alabama\", \"Alabama\", \"Al…\n$ Season      <chr> \"2004-05\", \"2005-06\", \"2006-07\", \"2007-08\", \"2008-09\", \"20…\n$ avg_tuition <dbl> 5682.838, 5840.550, 5753.496, 6008.169, 6475.092, 7188.954…\n```\n\n\n:::\n:::\n\n\n\n\n# How did tuition costs increased over time ?\n\nOur analysis reveals several interesting patterns in tuition cost evolution:\n\n1.  **Overall Growth Patterns**: We categorize states into six groups based on their tuition increase rates:\n\n    -   Decrease : Only one state had an decrease in the average tuition costs (Ohio)\n    -   Slow increase (0-23%)\n    -   Below median increase (23-50%)\n    -   Above median increase (50-75%)\n    -   Fast increase (75-100%)\n    -   More than double increase (\\>100%) : Multiple states had more than doubled\n\n2.  **Distribution Changes**: The visualization shows how tuition costs have become more concentrated around the median over time, with some notable exceptions at the upper end. The median tuition increased from \\${label_dollars(median_tuition_2005)} in 2004-05 to \\${label_dollars(median_tuition_2015)} in 2015-16.\n\n3.  **Consistency of Increases**: Interestingly, despite the 2008 financial crisis, tuition increases remained relatively consistent, with continued growth resuming immediately in the following year.\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_avg_tuition %>% \n  mutate(difference = `2015-16` - `2004-05`) %>% \n  ggplot(aes(x = fct_reorder(State, difference))) + \n  geom_col(aes(y = `2015-16`), fill = \"red\") + \n  geom_col(aes(y = `2004-05`), fill = \"orange\") + \n  geom_col(aes(y = - difference)) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](2018-04-03---US-Tuition-Costs_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n\n```{.r .cell-code}\ndiff_cutoff <- c(0, 0.23, 0.5, 0.75, 1)\ndiff_cutoff_names <- c(\"Decrease\", \"Slow increase\", \"Below median increase\", \"Above median increase\", \"Fast increase\", \"More than double increase\")\n\nus_avg_tuition %>% \n  mutate(difference = `2015-16` - `2004-05`,\n         diff_perc = round(difference / `2004-05`, 2),\n         diff_group = cut(\n           diff_perc, \n           breaks = c(-Inf, diff_cutoff, Inf), \n           labels = diff_cutoff_names,\n           right = FALSE),\n         diff_group = factor(diff_group, levels=diff_cutoff_names)) %>% \n  pivot_longer(`2004-05`:`2015-16`, names_to = \"Season\", values_to = \"avg_tuition\")  %>% \n  filter(Season %in% c(\"2004-05\", \"2015-16\")) %>% \n  \n  ggplot(aes(x = Season, avg_tuition, group=State)) + \n  geom_point(aes(color=Season)) + \n  geom_line() + \n  facet_wrap(diff_group~., nrow=1)\n```\n\n::: {.cell-output-display}\n![](2018-04-03---US-Tuition-Costs_files/figure-html/unnamed-chunk-1-2.png){width=672}\n:::\n\n```{.r .cell-code}\nus_avg_tuition %>% \n  mutate(difference = `2015-16` - `2004-05`) %>% \n  ggplot(aes(x = `2004-05`, y = `2015-16`)) + \n  geom_segment(aes(x = `2004-05`, y = `2004-05`, xend = `2004-05`, yend = `2015-16`, colour = \"segment\"), size=1, alpha=0.8) + \n  geom_point(size=4, alpha=0.5) + \n  geom_abline(slope = 1, intercept = 0, size=2) + \n  \n  lims(x= c(0 , NA), y = c(0 , NA))\n```\n\n::: {.cell-output-display}\n![](2018-04-03---US-Tuition-Costs_files/figure-html/unnamed-chunk-1-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# us_avg_tuition %>% \n#   mutate(difference = `2015-16` - `2004-05`,\n#          diff_perc = round(difference / `2004-05`, 2)) %>% \n#   ggplot(aes(group=State)) + \n#     geom_point(aes(x=\"A\", y=0)) + \n#     geom_point(aes(x = \"B\", y=diff_perc))\n\nmedian_tuition <- us_avg_tuition_longer %>% \n  group_by(Season) %>% \n  summarize(median = median(avg_tuition)) %>% \n  ungroup() \n\nmedian_tuition_2005 <- median_tuition %>% filter(Season == \"2004-05\") %>% head(1) %>% pull(median)\nmedian_tuition_2015 <- median_tuition %>% filter(Season == \"2015-16\") %>% head(1) %>% pull(median)\n\nus_avg_tuition %>% \n  pivot_longer(`2004-05`:`2015-16`, names_to = \"Season\", values_to = \"avg_tuition\")  %>% \n  \n  ggplot(aes(x = avg_tuition, y=Season)) + \n  geom_vline(xintercept = median_tuition_2005, col = \"grey30\", lty = \"dashed\") +\n  annotate(\"text\", y = 0.5, x = median_tuition_2005 + 50, label = \"Median tuition in 2004/05\", size = 3, hjust = 0) +\n  annotate(\"text\", y = 0.5, x = median_tuition_2005 - 50, label = label_dollars(median_tuition_2005), size = 3, hjust = 1) +\n  \n  \n  geom_vline(xintercept = median_tuition_2015, col = \"grey30\", lty = \"dashed\") +\n  annotate(\"text\", y = 0.5, x = median_tuition_2015 + 50, label = \"Median tuition in 2015/16\", size = 3, hjust = 0) +\n  annotate(\"text\", y = 0.5, x = median_tuition_2015 - 50, label = label_dollars(median_tuition_2015),\n           size = 3, hjust = 1) +\n  \n  stat_halfeye(fill_type = \"segments\", alpha = 0.3) +\n  stat_interval() +\n  stat_summary(geom = \"point\", fun = median) +\n  \n  scale_y_discrete(expand = expansion(add = c(1, 0))) +\n  scale_x_continuous(labels = scales::dollar_format()) +\n  \n  scale_color_manual(values = palette)\n```\n\n::: {.cell-output-display}\n![](2018-04-03---US-Tuition-Costs_files/figure-html/unnamed-chunk-1-4.png){width=672}\n:::\n:::\n\n\n\n\nThe \"lagging university increased faster to get more concentrated around the mean. A few escaped to reach the top\n\nNo increase in 2008 yet the trend is consistent as soon as the following year\n\n# Average tuition cost trends over time ?\n\n\n\n\n::: {.cell}\n\n:::\n\n\n\n\n# Did cheaper schools made their price increase faster ?\n\n\n\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "2018-04-03---US-Tuition-Costs_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}